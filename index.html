<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mercedes Model Studio</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="topbar">
        <div class="brand">
          <div class="brand-star">✶</div>
          <div>
            <p class="eyebrow">Mercedes-Benz AI</p>
            <h1>Image Metrics Studio</h1>
          </div>
        </div>
        <button class="ghost-btn" id="themeToggle" type="button">Night Mode</button>
      </header>

      <main class="content-grid">
        <section class="panel panel-input">
          <h2>Bilder vergleichen</h2>
          <p class="panel-intro">
            Wähle Referenz- und Generated-Bild aus und starte dieselbe Logik wie im Python-CMD (LPIPS, SSIM,
            DeltaE und optional Car-Only).
          </p>

          <label for="refImage">Referenzbild oder ZIP</label>
          <input id="refImage" type="file" accept="image/*,.zip,application/zip" />

          <label for="genImage">Generated-Bild oder ZIP</label>
          <input id="genImage" type="file" accept="image/*,.zip,application/zip" />

          <div class="field-row">
            <label for="lpipsNet">LPIPS Backbone</label>
            <select id="lpipsNet">
              <option value="alex">alex</option>
              <option value="vgg">vgg</option>
              <option value="squeeze">squeeze</option>
            </select>
          </div>

          <div class="toggle-row">
            <input id="carOnlyMode" type="checkbox" />
            <label for="carOnlyMode">Car-Only Modus aktivieren</label>
          </div>

          <details>
            <summary>Erweiterte Car-Only Parameter</summary>
            <div class="field-row">
              <label for="carMode">Car Mode</label>
              <select id="carMode">
                <option value="neutralize_crop">neutralize_crop</option>
                <option value="weighted_lpips">weighted_lpips</option>
              </select>
            </div>
            <div class="field-row">
              <label for="maskSource">Mask Source</label>
              <select id="maskSource">
                <option value="ref">ref</option>
                <option value="gen">gen</option>
                <option value="union">union</option>
              </select>
            </div>
          </details>

          <div class="actions">
            <button class="primary-btn" id="runModel" type="button">Vergleich starten</button>
            <button class="secondary-btn" id="resetForm" type="button">Zurücksetzen</button>
          </div>
        </section>

        <section class="panel panel-output">
          <div class="output-header">
            <h2>Metric Dashboard</h2>
            <span id="statusBadge" class="status-badge idle">Bereit</span>
          </div>

          <div class="preview-card">
            <p class="preview-title">Status</p>
            <p id="previewText">Lade zwei Bilder hoch und starte den Vergleich.</p>
          </div>

          <div class="image-preview-grid">
            <figure>
              <figcaption>Referenzbild</figcaption>
              <img id="refPreview" alt="Referenz Vorschau" />
            </figure>
            <figure>
              <figcaption>Generated-Bild</figcaption>
              <img id="genPreview" alt="Generated Vorschau" />
            </figure>
          </div>


          <section id="carOnlyPreviewSection" class="car-preview-section" hidden>
            <p class="preview-title">Car-Only Zuschnitt (Preview)</p>
            <div class="image-preview-grid">
              <figure>
                <figcaption>Car-Only Referenz</figcaption>
                <img id="carRefPreview" alt="Car-Only Referenz Vorschau" />
              </figure>
              <figure>
                <figcaption>Car-Only Generated</figcaption>
                <img id="carGenPreview" alt="Car-Only Generated Vorschau" />
              </figure>
              <figure>
                <figcaption>Car-Only Maske</figcaption>
                <img id="carMaskPreview" alt="Car-Only Masken Vorschau" />
              </figure>
            </div>
          </section>

          <div class="stats-grid">
            <article><p class="stat-label">LPIPS</p><p id="lpips" class="stat-value">--</p></article>
            <article><p class="stat-label">LPIPS Similarity</p><p id="lpipsSimilarity" class="stat-value">-- %</p></article>
            <article><p class="stat-label">SSIM</p><p id="ssim" class="stat-value">--</p></article>
            <article><p class="stat-label">ΔE CIEDE2000</p><p id="deltaE" class="stat-value">--</p></article>
            <article><p class="stat-label">Car LPIPS</p><p id="lpipsCar" class="stat-value">--</p></article>
            <article><p class="stat-label">Mask IoU</p><p id="maskIou" class="stat-value">--</p></article>
            <article><p class="stat-label">Mask Dice</p><p id="maskDice" class="stat-value">--</p></article>
          </div>
        </section>
      </main>
    </div>

    <script src="script.js"></script>
  </body>
</html>
